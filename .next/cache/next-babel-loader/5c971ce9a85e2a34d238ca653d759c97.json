{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AppLayout from '../components/AppLayout/AppLayout';\nimport { Button, Form, Input, Select } from \"antd\";\nimport 'antd/dist/antd.css';\nimport { LOAD_POST_REQUEST, REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPDATE_BOARD, UPDATE_TAG, UPLOAD_IMAGES_REQUEST } from \"../reducers/post\";\nimport Router from \"next/router\";\nimport useInput from \"../hooks/useInput\";\nimport Layout from \"../components/Layout\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nconst {\n  TextArea\n} = Input;\nconst {\n  Option\n} = Select;\n\nfunction TalkSend({\n  postId,\n  userId\n}) {\n  const dispatch = useDispatch();\n  const {\n    me,\n    location\n  } = useSelector(state => state.user);\n  const {\n    addPostDone\n  } = useSelector(state => state.post);\n  const [title, onTitle, setTitle] = useInput('');\n  const [content, onContent, setContent] = useInput('');\n  const [toId, onToId, setToId] = useInput('');\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.push('/objectreceive', undefined, {\n        shallow: true\n      });\n    }\n  }, [me && me.id]);\n  useEffect(() => {\n    if (addPostDone) {\n      Router.push('/objectreceive', undefined, {\n        shallow: true\n      });\n    }\n  }, [addPostDone]);\n  const [form] = Form.useForm();\n  useEffect(() => {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n    dispatch({\n      type: UPDATE_TAG,\n      data: \"전체\"\n    });\n    dispatch({\n      type: UPDATE_BOARD,\n      data: 9\n    });\n  }, [location]);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  const onSubmit = useCallback(() => {\n    if (!content || !content.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    const formData = new FormData();\n    formData.append('content', content);\n    formData.append('userid', me.id);\n    formData.append('location', me.location);\n    formData.append('nickname', me.nickname);\n    formData.append('title', title);\n    return dispatch({\n      type: SEND_DUMMYPOST_REQUEST,\n      data: formData\n    });\n  }, [content]);\n  const onCancel = useCallback(() => {\n    Router.push('/', undefined, {\n      shallow: true\n    });\n  }, []);\n  return __jsx(Layout, null, __jsx(\"div\", null, __jsx(\"br\", null)), __jsx(Form, {\n    layout: \"horizontal\",\n    form: form,\n    initialValues: {\n      layout: 'horizontal'\n    },\n    onFinish: onSubmit\n  }, __jsx(Form.Item, null, __jsx(Input.Group, {\n    compact: true\n  }, __jsx(Input, {\n    style: {\n      width: '69%'\n    },\n    placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: title,\n    onChange: onTitle\n  }), ' ')), __jsx(Form.Item, null, __jsx(TextArea, {\n    placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    autoSize: {\n      minRows: 7,\n      maxRows: 7\n    },\n    value: content,\n    onChange: onContent\n  })), __jsx(Form.Item, {\n    style: {\n      textAlign: 'center'\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\uB4F1\\uB85D\"), ' ', __jsx(Button, {\n    type: \"primary\",\n    onClick: onCancel\n  }, \"\\uCDE8\\uC18C\"))));\n}\n\n;\nexport default TalkSend;","map":null,"metadata":{},"sourceType":"module"}