{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AppLayout from '../components/AppLayout/AppLayout';\nimport { Button, Form, Input, Select } from \"antd\";\nimport 'antd/dist/antd.css';\nimport { LOAD_POST_REQUEST, REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPDATE_BOARD, UPDATE_TAG, UPLOAD_IMAGES_REQUEST } from \"../reducers/post\";\nimport Router from \"next/router\";\nimport useInput from \"../hooks/useInput\";\nimport Layout from \"../components/Layout\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nvar TextArea = Input.TextArea;\nvar Option = Select.Option;\n\nfunction TalkSend(_ref) {\n  var postId = _ref.postId,\n      userId = _ref.userId;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      location = _useSelector.location;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      addPostDone = _useSelector2.addPostDone;\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      title = _useInput2[0],\n      onTitle = _useInput2[1],\n      setTitle = _useInput2[2];\n\n  var _useInput3 = useInput(''),\n      _useInput4 = _slicedToArray(_useInput3, 3),\n      content = _useInput4[0],\n      onContent = _useInput4[1],\n      setContent = _useInput4[2];\n\n  var _useInput5 = useInput(''),\n      _useInput6 = _slicedToArray(_useInput5, 3),\n      toId = _useInput6[0],\n      onToId = _useInput6[1],\n      setToId = _useInput6[2];\n\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push('/objectreceive', undefined, {\n        shallow: true\n      });\n    }\n  }, [me && me.id]);\n  useEffect(function () {\n    if (addPostDone) {\n      Router.push('/objectreceive', undefined, {\n        shallow: true\n      });\n    }\n  }, [addPostDone]);\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  useEffect(function () {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n    dispatch({\n      type: UPDATE_TAG,\n      data: \"전체\"\n    });\n    dispatch({\n      type: UPDATE_BOARD,\n      data: 9\n    });\n  }, [location]);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  var onSubmit = useCallback(function () {\n    if (!content || !content.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    var formData = new FormData();\n    formData.append('content', content);\n    formData.append('userid', me.id);\n    formData.append('location', me.location);\n    formData.append('nickname', me.nickname);\n    formData.append('title', title);\n    return dispatch({\n      type: SEND_DUMMYPOST_REQUEST,\n      data: formData\n    });\n  }, [content]);\n  var onCancel = useCallback(function () {\n    Router.push('/', undefined, {\n      shallow: true\n    });\n  }, []);\n  return __jsx(Layout, null, __jsx(\"div\", null, __jsx(\"br\", null)), __jsx(Form, {\n    layout: \"horizontal\",\n    form: form,\n    initialValues: {\n      layout: 'horizontal'\n    },\n    onFinish: onSubmit\n  }, __jsx(Form.Item, null, __jsx(Input.Group, {\n    compact: true\n  }, __jsx(Input, {\n    style: {\n      width: '69%'\n    },\n    placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: title,\n    onChange: onTitle\n  }), ' ')), __jsx(Form.Item, null, __jsx(TextArea, {\n    placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    autoSize: {\n      minRows: 7,\n      maxRows: 7\n    },\n    value: content,\n    onChange: onContent\n  })), __jsx(Form.Item, {\n    style: {\n      textAlign: 'center'\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\uB4F1\\uB85D\"), ' ', __jsx(Button, {\n    type: \"primary\",\n    onClick: onCancel\n  }, \"\\uCDE8\\uC18C\"))));\n}\n\n;\nexport default TalkSend;","map":null,"metadata":{},"sourceType":"module"}