{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user';\nimport { LOAD_POST_REQUEST, UPDATE_BOARD, UPDATE_TAG } from '../reducers/post';\nimport PostCard1 from \"../components/PostCard1\";\nimport Layout from \"../components/Layout\";\nimport { Button, Col, Form, Input, Row } from \"antd\";\nimport styled from \"styled-components\";\nimport useInput from \"../hooks/useInput\";\nimport TalkCard1 from \"../components/TalkCard1\";\nimport TalkCard2 from \"../components/TalkCard2\";\nvar TextArea = Input.TextArea;\nvar PostCarDiv2 = styled.div.withConfig({\n  displayName: \"rentaltalk__PostCarDiv2\",\n  componentId: \"sc-1ux3n4l-0\"\n})([\"width:100%;display:flex;flex-wrap:wrap;\"]);\nvar Div1 = styled.div.withConfig({\n  displayName: \"rentaltalk__Div1\",\n  componentId: \"sc-1ux3n4l-1\"\n})([\"width:100%;height:100%;display:flex;flex-wrap:wrap;\"]);\nvar Div2 = styled.div.withConfig({\n  displayName: \"rentaltalk__Div2\",\n  componentId: \"sc-1ux3n4l-2\"\n})([\"width:100%;height:100%;display:flex;flex-wrap:wrap;\"]);\nvar dummy = [{\n  id: 1,\n  send_userId: 2,\n  receive_userID: 3,\n  content: \"안녕1\",\n  isRead: false\n}, {\n  id: 2,\n  send_userId: 5,\n  receive_userID: 2,\n  content: \"안녕2\",\n  isRead: false\n}, {\n  id: 3,\n  send_userId: 2,\n  receive_userID: 2,\n  content: \"안녕3\",\n  isRead: false\n}, {\n  id: 4,\n  send_userId: 4,\n  receive_userID: 3,\n  content: \"안녕4\",\n  isRead: false\n}, {\n  id: 5,\n  send_userId: 2,\n  receive_userID: 4,\n  content: \"안녕5\",\n  isRead: false\n}, {\n  id: 6,\n  send_userId: 3,\n  receive_userID: 5,\n  content: \"안녕6\",\n  isRead: false\n}, {\n  id: 7,\n  send_userId: 5,\n  receive_userID: 2,\n  content: \"안녕7\",\n  isRead: false\n}, {\n  id: 8,\n  send_userId: 5,\n  receive_userID: 2,\n  content: \"안녕8\",\n  isRead: false\n}, {\n  id: 9,\n  send_userId: 6,\n  receive_userID: 6,\n  content: \"안녕9\",\n  isRead: false\n}, {\n  id: 10,\n  send_userId: 1,\n  receive_userID: 3,\n  content: \"안녕10\",\n  isRead: false\n}, {\n  id: 11,\n  send_userId: 1,\n  receive_userID: 3,\n  content: \"안녕11\",\n  isRead: false\n}];\n\nfunction Rentaltalk() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      location = _useSelector.location;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      mainTalks = _useSelector2.mainTalks,\n      talkUsers = _useSelector2.talkUsers,\n      selectedTag = _useSelector2.selectedTag,\n      object_TagsData = _useSelector2.object_TagsData,\n      mainPosts = _useSelector2.mainPosts,\n      hasMorePost = _useSelector2.hasMorePost,\n      loadPostLoading = _useSelector2.loadPostLoading,\n      id = _useSelector2.id;\n\n  var _useState = useState(true),\n      view = _useState[0],\n      setView = _useState[1];\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      content = _useInput2[0],\n      onContent = _useInput2[1],\n      setContent = _useInput2[2];\n\n  var _useInput3 = useInput([]),\n      _useInput4 = _slicedToArray(_useInput3, 3),\n      selectedPost = _useInput4[0],\n      onSelectedPost = _useInput4[1],\n      setSelectedPost = _useInput4[2];\n\n  var onSwitch = useCallback(function () {\n    setView(!view);\n  }, [view]);\n  useEffect(function () {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n    dispatch({\n      type: UPDATE_BOARD,\n      data: 8\n    }); // dispatch({\n    //   type: LOAD_TALK_REQUEST,\n    // });\n  }, [location]);\n  useEffect(function () {\n    if (me) {\n      var Talks = dummy.filter(function (talk) {\n        return talk.receive_userId !== me.id;\n      }).concat(dummy.filter(function (talk) {\n        return talk.send_userId !== me.id;\n      })); //내가 보냈거나 나에게 온 메시지들을 따로 모아준다.\n\n      console.log(Talks); // const allUsers = Talks.receive_userId.concat(Talks.send_userId);\n      //\n      // const set = new Set(allUsers);\n      //\n      // const users = [...set];\n      //\n      // console.log(users);\n    }\n  }, [me]);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \" \\uB80C\\uD0C8\\uD1A1 | \\uC6B0\\uB9AC\\uB3D9\\uB124 \\uB80C\\uD0C8\\uB300\\uC7A5\")), __jsx(Layout, null, __jsx(Row, {\n    gutter: 8\n  }, __jsx(Col, {\n    xs: 12,\n    md: 12\n  }, __jsx(Div1, null, mainTalks.map(function (talk) {\n    return talk.receive_userId === me.id && __jsx(UserCard, {\n      key: talk.id,\n      userInfo: talk\n    });\n  }))), __jsx(Col, {\n    xs: 0,\n    md: 0\n  }), __jsx(Col, {\n    xs: 12,\n    md: 12\n  }, view && __jsx(Div2, null, __jsx(PostCard1, {\n    post: selectedPost\n  }), mainTalks.map(function (talk) {\n    return view ? __jsx(TalkCard1, {\n      key: talk.id,\n      talk: talk\n    }) : __jsx(TalkCard2, {\n      key: talk.id,\n      talk: talk\n    });\n  }), __jsx(TextArea, {\n    placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    autoSize: {\n      minRows: 1,\n      maxRows: 7\n    },\n    value: content,\n    onChange: onContent\n  }))))));\n}\n\nexport default Rentaltalk;","map":null,"metadata":{},"sourceType":"module"}