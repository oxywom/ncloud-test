{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user';\nimport { LOAD_POST_REQUEST, UPDATE_BOARD, UPDATE_TAG } from '../reducers/post';\nimport Tags from \"../components/Tags\";\nimport PostCard1 from \"../components/PostCard1\";\nimport Layout from \"../components/Layout\";\nimport { Button } from \"antd\";\nimport PostCard2 from \"../components/PostCard2\";\nimport styled from \"styled-components\";\nimport a1 from \"../components/광고1.jpeg\";\nimport a2 from \"../components/광고2.jpg\";\nimport a3 from \"../components/광고3.jpg\";\nimport a4 from \"../components/광고4.jpeg\";\nimport a5 from \"../components/광고5.jpg\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nvar PostCarDiv2 = styled.div.withConfig({\n  displayName: \"talentreceive__PostCarDiv2\",\n  componentId: \"sc-1sv2b93-0\"\n})([\"width:100%;display:flex;flex-wrap:wrap;justify-content:center;\"]);\nvar AdvertisementDiv = styled.div.withConfig({\n  displayName: \"talentreceive__AdvertisementDiv\",\n  componentId: \"sc-1sv2b93-1\"\n})([\"width:100%;height:297px;position:relative;\"]);\n\nfunction Talentreceive() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      location = _useSelector.location;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      talent_TagsData = _useSelector2.talent_TagsData,\n      selectedTag = _useSelector2.selectedTag,\n      mainPosts = _useSelector2.mainPosts,\n      hasMorePost = _useSelector2.hasMorePost,\n      loadPostLoading = _useSelector2.loadPostLoading,\n      id = _useSelector2.id;\n\n  var _useState = useState(true),\n      view = _useState[0],\n      setView = _useState[1];\n\n  var onSwitch = useCallback(function () {\n    setView(!view);\n  }, [view]);\n  var advImg = [{\n    src: a1\n  }, {\n    src: a2\n  }, {\n    src: a3\n  }, {\n    src: a4\n  }, {\n    src: a5\n  }];\n\n  var _useState2 = useState(0),\n      i = _useState2[0],\n      Seti = _useState2[1];\n\n  var _useState3 = useState(a1),\n      imgSrc = _useState3[0],\n      SetImgSrc = _useState3[1];\n\n  var RchangeImg = function RchangeImg() {\n    if (i < 5) {\n      Seti(i + 1);\n      SetImgSrc(advImg[i].src);\n    } else if (i === 5) {\n      Seti(0);\n    }\n  };\n\n  var LchangImg = function LchangImg() {\n    if (i > 0) {\n      Seti(i - 1);\n      SetImgSrc(advImg[i - 1].src);\n      console.log(imgSrc);\n    }\n  };\n\n  useEffect(function () {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n    dispatch({\n      type: UPDATE_TAG,\n      data: \"전체\"\n    });\n    dispatch({\n      type: UPDATE_BOARD,\n      data: 3\n    });\n    dispatch({\n      type: LOAD_POST_REQUEST,\n      data: \"전체\",\n      boardNum: 3,\n      location: location\n    });\n  }, [location]);\n  useEffect(function () {\n    var onScroll = function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 100) {\n        if (hasMorePost && !loadPostLoading) {\n          var _mainPosts;\n\n          var lastId = (_mainPosts = mainPosts[mainPosts.length - 1]) === null || _mainPosts === void 0 ? void 0 : _mainPosts.id; // 인피니트 스크롤 구현을 위해 프론트 서버의 현재 렌더링중인 게시글들중 가장 아래 게시물의 게시넘버를 lastId로\n\n          console.log(selectedTag);\n          dispatch({\n            type: LOAD_POST_REQUEST,\n            data: selectedTag,\n            boardNum: 3,\n            lastId: lastId,\n            location: location\n          });\n        } // 지역변수를 건드려봣자 어차피 렌더링이 되지 않는다. 실제 동작으로 테스트 해야할듯\n\n      }\n    };\n\n    window.addEventListener('scroll', onScroll);\n    return function () {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [hasMorePost, loadPostLoading, location]);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"\\uD798\\uC744 \\uBE4C\\uB824\\uC918 | \\uC6B0\\uB9AC\\uB3D9\\uB124 \\uB80C\\uD0C8\\uB300\\uC7A5\")), view ? __jsx(Layout, null, __jsx(AdvertisementDiv, null, __jsx(\"img\", {\n    src: imgSrc,\n    width: \"100%\",\n    height: \"100%\"\n  }), __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"130px\",\n      width: \"50px\"\n    },\n    onClick: LchangImg\n  }, __jsx(LeftOutlined, {\n    style: {\n      fontSize: \"25px\",\n      color: \"gray\"\n    }\n  })), __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"130px\",\n      left: \"900px\",\n      width: \"50px\"\n    },\n    onClick: RchangeImg\n  }, __jsx(RightOutlined, {\n    style: {\n      fontSize: \"25px\",\n      color: \"gray\"\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      paddingRight: \"80px\"\n    }\n  }, __jsx(Tags, {\n    tagsData: talent_TagsData,\n    boardNum: 3\n  }), __jsx(Button, {\n    onClick: onSwitch\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\")), mainPosts.map(function (post) {\n    return __jsx(PostCard1, {\n      key: post.id,\n      post: post\n    });\n  })) : __jsx(Layout, null, __jsx(AdvertisementDiv, null, __jsx(\"img\", {\n    src: imgSrc,\n    width: \"100%\",\n    height: \"100%\"\n  }), __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"130px\",\n      width: \"50px\"\n    },\n    onClick: LchangImg\n  }, __jsx(LeftOutlined, {\n    style: {\n      fontSize: \"25px\",\n      color: \"gray\"\n    }\n  })), __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"130px\",\n      left: \"900px\",\n      width: \"50px\"\n    },\n    onClick: RchangeImg\n  }, __jsx(RightOutlined, {\n    style: {\n      fontSize: \"25px\",\n      color: \"gray\"\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      paddingRight: \"80px\"\n    }\n  }, __jsx(Tags, {\n    tagsData: talent_TagsData,\n    boardNum: 3\n  }), __jsx(Button, {\n    onClick: onSwitch\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\")), __jsx(PostCarDiv2, null, mainPosts.map(function (post) {\n    return __jsx(PostCard2, {\n      key: post.id,\n      post: post\n    });\n  }))));\n}\n\nexport default Talentreceive;","map":null,"metadata":{},"sourceType":"module"}