{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Router, { useRouter } from 'next/router';\nimport AppLayout from '../../components/AppLayout/AppLayout';\nimport { LOAD_SPOST_REQUEST, REMOVE_POST_REQUEST, STATUS_POST_REQUEST } from \"../../reducers/post\";\nimport { Avatar, Button, Card, Form } from \"antd\";\nimport PostImages from \"../../components/PostImages\";\nimport Link from 'next/link';\nimport Layout from \"../../components/Layout\";\nimport Reply from \"../../components/DH/Reply\";\nimport moment from \"moment\";\nimport styled from \"styled-components\";\nimport a1 from \"../../components/광고1.jpeg\";\nimport a2 from \"../../components/광고2.jpg\";\nimport a3 from \"../../components/광고3.jpg\";\nimport a4 from \"../../components/광고4.jpeg\";\nimport a5 from \"../../components/광고5.jpg\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\nimport Swal from \"sweetalert2\";\nvar PostCarDiv2 = styled.div.withConfig({\n  displayName: \"id__PostCarDiv2\",\n  componentId: \"sc-zxj80n-0\"\n})([\"width:100%;display:flex;flex-wrap:wrap;justify-content:center;\"]);\nvar AdvertisementDiv = styled.div.withConfig({\n  displayName: \"id__AdvertisementDiv\",\n  componentId: \"sc-zxj80n-1\"\n})([\"width:100%;height:297px;position:relative;\"]);\n\nfunction PostPage() {\n  var dispatch = useDispatch();\n  var router = useRouter();\n  var id = router.query.id; // [tag].js 파일 명의 [] 부분이 들어간다\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      singlePost = _useSelector.singlePost,\n      mainPosts = _useSelector.mainPosts,\n      hasMorePost = _useSelector.hasMorePost,\n      loadPostLoading = _useSelector.loadPostLoading,\n      location = _useSelector.location;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      userInfo = _useSelector2.userInfo,\n      me = _useSelector2.me;\n\n  var advImg = [{\n    src: a1\n  }, {\n    src: a2\n  }, {\n    src: a3\n  }, {\n    src: a4\n  }, {\n    src: a5\n  }];\n\n  var _useState = useState(0),\n      i = _useState[0],\n      Seti = _useState[1];\n\n  var _useState2 = useState(a1),\n      imgSrc = _useState2[0],\n      SetImgSrc = _useState2[1];\n\n  var RchangeImg = function RchangeImg() {\n    if (i < 5) {\n      Seti(i + 1);\n      SetImgSrc(advImg[i].src);\n    } else if (i === 5) {\n      Seti(0);\n    }\n  };\n\n  var LchangImg = function LchangImg() {\n    if (i > 0) {\n      Seti(i - 1);\n      SetImgSrc(advImg[i - 1].src);\n      console.log(imgSrc);\n    }\n  };\n\n  var idAndBoardNum = id.split('*');\n  var postId = idAndBoardNum[0];\n  var postBoardNum = idAndBoardNum[1];\n\n  var _useState3 = useState(postId),\n      postId2 = _useState3[0],\n      setPostId = _useState3[1];\n\n  var _useState4 = useState(postBoardNum),\n      postBoardNum2 = _useState4[0],\n      setPostBoardNum = _useState4[1];\n\n  var onPage = useCallback(function () {\n    Router.push(\"/modify/\".concat(postId, \"*\").concat(postBoardNum), undefined, {\n      shallow: true\n    });\n  }, []);\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  useEffect(function () {\n    if (!me) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: \"로그인이 필요합니다!\"\n      });\n      Router.push('/loginpage', undefined, {\n        shallow: true\n      });\n    }\n  }, []);\n  useEffect(function () {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n  }, []);\n  useEffect(function () {\n    dispatch({\n      type: LOAD_SPOST_REQUEST,\n      postId: postId,\n      postBoardNum: postBoardNum\n    });\n  }, []); // useEffect(()=>{\n  //   setTimeout(() => {\n  //     if(singlePost === null)\n  //     {\n  //       setPostId((prev)=>prev-1);\n  //       dispatch({\n  //         type:LOAD_SPOST_REQUEST,\n  //         postId:postId2,\n  //         postBoardNum:postBoardNum,\n  //       });\n  //     }\n  //   }, 500);\n  // },[postId2,postBoardNum2]);\n\n  var prevPage = useCallback(function () {\n    setPostId(function (prev) {\n      return prev - 1;\n    });\n    dispatch({\n      type: LOAD_SPOST_REQUEST,\n      postId: postId2,\n      postBoardNum: postBoardNum2\n    });\n  }, [postId2, postBoardNum2]);\n  var nextPage = useCallback(function () {\n    setPostId(function (prev) {\n      return prev + 1;\n    });\n    dispatch({\n      type: LOAD_SPOST_REQUEST,\n      postId: postId2,\n      postBoardNum: postBoardNum2\n    });\n  }, [postId2, postBoardNum2]);\n  var onSale = useCallback(function () {\n    dispatch({\n      type: STATUS_POST_REQUEST,\n      postId: singlePost.id,\n      postBoardNum: singlePost.boardNum,\n      postStatus: 0\n    });\n  }, [singlePost]);\n  var onTrade = useCallback(function () {\n    dispatch({\n      type: STATUS_POST_REQUEST,\n      postId: singlePost.id,\n      postBoardNum: singlePost.boardNum,\n      postStatus: 1\n    });\n  }, [singlePost]);\n  var onDone = useCallback(function () {\n    dispatch({\n      type: STATUS_POST_REQUEST,\n      postId: singlePost.id,\n      postBoardNum: singlePost.boardNum,\n      postStatus: 2\n    });\n  }, [singlePost]);\n  var onRemove = useCallback(function () {\n    dispatch({\n      type: REMOVE_POST_REQUEST,\n      postId: singlePost.id,\n      postBoardNum: singlePost.boardNum\n    });\n    Router.push('/objectreceive', undefined, {\n      shallow: true\n    });\n  }, [singlePost]);\n  return __jsx(Layout, null, singlePost && __jsx(Form, {\n    layout: \"horizontal\",\n    form: form,\n    initialValues: {\n      layout: 'horizontal'\n    }\n  }, singlePost.boardNum === 1 && __jsx(\"div\", null, singlePost.ProdPostImages.length > 0 ? __jsx(Card, {\n    cover: __jsx(PostImages, {\n      images: singlePost.ProdPostImages\n    }),\n    title: __jsx(\"h2\", null, singlePost.title, \"  \\uB80C\\uD0C8\\uB8CC: \", singlePost.price)\n  }, singlePost.content) : __jsx(Card, {\n    title: singlePost.title\n  }, singlePost.content), __jsx(\"div\", null, singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onSale\n  }, \"\\uD310\\uB9E4\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onTrade\n  }, \"\\uAC70\\uB798\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onDone\n  }, \"\\uAC70\\uB798\\uC644\\uB8CC\")), __jsx(Reply, null)), singlePost.boardNum === 2 && __jsx(\"div\", null, singlePost.ProdPostImages.length > 0 ? __jsx(Card, {\n    cover: __jsx(PostImages, {\n      images: singlePost.ProdPostImages\n    }),\n    title: __jsx(\"h2\", null, singlePost.title, \"  \\uB80C\\uD0C8\\uB8CC: \", singlePost.price)\n  }, singlePost.content) : __jsx(Card, {\n    title: singlePost.title\n  }, singlePost.content), __jsx(\"div\", null, singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onSale\n  }, \"\\uD310\\uB9E4\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onTrade\n  }, \"\\uAC70\\uB798\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onDone\n  }, \"\\uAC70\\uB798\\uC644\\uB8CC\")), __jsx(Reply, null)), singlePost.boardNum === 3 && __jsx(\"div\", null, singlePost.PowerPostImages.length > 0 ? __jsx(Card, {\n    cover: __jsx(PostImages, {\n      images: singlePost.PowerPostImages\n    }),\n    title: __jsx(\"h2\", null, singlePost.title, \"  \\uB80C\\uD0C8\\uB8CC: \", singlePost.price)\n  }, singlePost.content) : __jsx(Card, {\n    title: singlePost.title\n  }, singlePost.content), __jsx(\"div\", null, singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onSale\n  }, \"\\uD310\\uB9E4\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onTrade\n  }, \"\\uAC70\\uB798\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onDone\n  }, \"\\uAC70\\uB798\\uC644\\uB8CC\")), __jsx(Reply, null)), singlePost.boardNum === 4 && __jsx(\"div\", null, singlePost.PowerPostImages.length > 0 ? __jsx(Card, {\n    cover: __jsx(PostImages, {\n      images: singlePost.PowerPostImages\n    }),\n    title: __jsx(\"h2\", null, singlePost.title, \"  \\uB80C\\uD0C8\\uB8CC: \", singlePost.price)\n  }, singlePost.content) : __jsx(Card, {\n    title: singlePost.title\n  }, singlePost.content), __jsx(\"div\", null, singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onSale\n  }, \"\\uD310\\uB9E4\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onTrade\n  }, \"\\uAC70\\uB798\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onDone\n  }, \"\\uAC70\\uB798\\uC644\\uB8CC\")), __jsx(Reply, null)), singlePost.boardNum === 5 && __jsx(\"div\", null, singlePost.TogetherPostImages.length > 0 ? __jsx(Card, {\n    cover: __jsx(PostImages, {\n      images: singlePost.TogetherPostImages\n    }),\n    title: singlePost.title\n  }, singlePost.content) : __jsx(Card, {\n    title: singlePost.title\n  }, singlePost.content), __jsx(\"div\", null, singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onSale\n  }, \"\\uD310\\uB9E4\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onTrade\n  }, \"\\uAC70\\uB798\\uC911\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onDone\n  }, \"\\uAC70\\uB798\\uC644\\uB8CC\")), __jsx(Reply, null)), __jsx(\"div\", null, __jsx(Button, {\n    onClick: prevPage\n  }, \"\\uC774\\uC804\\uAE00\"), __jsx(Button, {\n    onClick: nextPage\n  }, \"\\uB2E4\\uC74C\\uAE00\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onPage\n  }, \"\\uC218\\uC815\"), singlePost.user_nickname === me.nickname && __jsx(Button, {\n    onClick: onRemove\n  }, \"\\uC0AD\\uC81C\"))));\n}\n\nexport var __N_SSP = true;\nexport default PostPage;","map":null,"metadata":{},"sourceType":"module"}