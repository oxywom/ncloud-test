{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST, logoutRequestAction, UPDATE_LOCAL } from '../reducers/user';\nimport { LOAD_POST_REQUEST, TEST } from '../reducers/post';\nimport styled from \"styled-components\";\nimport Write from \"./write\";\nvar PostCarDiv2 = styled.div.withConfig({\n  displayName: \"home__PostCarDiv2\",\n  componentId: \"sc-hpssxr-0\"\n})([\"width:100%;display:flex;flex-wrap:wrap;\"]);\n\nfunction SSRPAGE() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      location = _useSelector.location;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      mainPosts = _useSelector2.mainPosts,\n      hasMorePost = _useSelector2.hasMorePost,\n      loadPostLoading = _useSelector2.loadPostLoading,\n      reTweetError = _useSelector2.reTweetError,\n      id = _useSelector2.id,\n      object_TagsData = _useSelector2.object_TagsData,\n      selectedTag = _useSelector2.selectedTag;\n\n  var _useState = useState(true),\n      view = _useState[0],\n      setView = _useState[1];\n\n  var onSwitch = useCallback(function () {\n    setView(!view);\n  }, [view]);\n  useEffect(function () {\n    dispatch({\n      type: LOAD_MY_INFO_REQUEST\n    });\n  }, []); // useEffect(()=>{\n  //   if(location === null)\n  //   dispatch({\n  //     type:UPDATE_LOCAL,\n  //     data:me.location,\n  //   })\n  // },[me]);\n\n  useEffect(function () {\n    var onScroll = function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 100) {\n        if (hasMorePost && !loadPostLoading) {\n          var _mainPosts;\n\n          var lastId = (_mainPosts = mainPosts[mainPosts.length - 1]) === null || _mainPosts === void 0 ? void 0 : _mainPosts.id; // 인피니트 스크롤 구현을 위해 프론트 서버의 현재 렌더링중인 게시글들중 가장 아래 게시물의 게시넘버를 lastId로\n\n          dispatch({\n            type: LOAD_POST_REQUEST,\n            data: selectedTag,\n            boardNum: 1,\n            lastId: lastId\n          });\n        } // 지역변수를 건드려봣자 어차피 렌더링이 되지 않는다. 실제 동작으로 테스트 해야할듯\n\n      }\n    };\n\n    window.addEventListener('scroll', onScroll);\n    return function () {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [hasMorePost, loadPostLoading]);\n  return __jsx(\"div\", null, __jsx(Write, null));\n}\n\nexport var __N_SSP = true;\nexport default SSRPAGE;","map":null,"metadata":{},"sourceType":"module"}